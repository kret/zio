"use strict";(self.webpackChunkzio_site=self.webpackChunkzio_site||[]).push([[90730],{3905:(e,n,o)=>{o.d(n,{Zo:()=>l,kt:()=>h});var t=o(67294);function a(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function r(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.push.apply(o,t)}return o}function c(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(n){a(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function i(e,n){if(null==e)return{};var o,t,a=function(e,n){if(null==e)return{};var o,t,a={},r=Object.keys(e);for(t=0;t<r.length;t++)o=r[t],n.indexOf(o)>=0||(a[o]=e[o]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)o=r[t],n.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}var s=t.createContext({}),d=function(e){var n=t.useContext(s),o=n;return e&&(o="function"==typeof e?e(n):c(c({},n),e)),o},l=function(e){var n=d(e.components);return t.createElement(s.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},u=t.forwardRef((function(e,n){var o=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),p=d(o),u=a,h=p["".concat(s,".").concat(u)]||p[u]||m[u]||r;return o?t.createElement(h,c(c({ref:n},l),{},{components:o})):t.createElement(h,c({ref:n},l))}));function h(e,n){var o=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=o.length,c=new Array(r);c[0]=u;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[p]="string"==typeof e?e:a,c[1]=i;for(var d=2;d<r;d++)c[d]=o[d];return t.createElement.apply(null,c)}return t.createElement.apply(null,o)}u.displayName="MDXCreateElement"},72111:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var t=o(87462),a=(o(67294),o(3905));const r={id:"json",title:"JSON Codecs",sidebar_label:"JSON"},c=void 0,i={unversionedId:"zio-schema/derivations/codecs/json",id:"zio-schema/derivations/codecs/json",title:"JSON Codecs",description:"Introduction",source:"@site/docs/zio-schema/derivations/codecs/json.md",sourceDirName:"zio-schema/derivations/codecs",slug:"/zio-schema/derivations/codecs/json",permalink:"/zio-schema/derivations/codecs/json",draft:!1,editUrl:"https://github.com/zio/zio/edit/series/2.x/docs/zio-schema/derivations/codecs/json.md",tags:[],version:"current",frontMatter:{id:"json",title:"JSON Codecs",sidebar_label:"JSON"},sidebar:"ecosystem-sidebar",previous:{title:"BSON",permalink:"/zio-schema/derivations/codecs/bson"},next:{title:"MessagePack",permalink:"/zio-schema/derivations/codecs/message-pack"}},s={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Installation",id:"installation",level:2},{value:"JsonCodec",id:"jsoncodec",level:2},{value:"BinaryCodec",id:"binarycodec",level:2}],l={toc:d},p="wrapper";function m(e){let{components:n,...o}=e;return(0,a.kt)(p,(0,t.Z)({},l,o,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"JSON (JavaScript Object Notation) is a widely used data interchange format for transmitting and storing data. ZIO Schema provides ",(0,a.kt)("inlineCode",{parentName:"p"},"zio-schema-json")," module which has functionality to derive JSON codecs from a ZIO Schema. JSON codecs allow us to easily serialize and deserialize data in JSON format. In this article, we will explore how derive JSON codecs using the ZIO Schema."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("p",null,"To derive JSON codecs from a ZIO Schema, we need to add the following dependency to our ",(0,a.kt)("inlineCode",{parentName:"p"},"build.sbt")," file:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'libraryDependencies += "dev.zio" %% "zio-schema-json" % 0.4.15\n')),(0,a.kt)("h2",{id:"jsoncodec"},"JsonCodec"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"JsonCodec")," object inside the ",(0,a.kt)("inlineCode",{parentName:"p"},"zio.schema.codec")," package provides the ",(0,a.kt)("inlineCode",{parentName:"p"},"jsonCodec")," operator which allows us to derive JSON codecs from a ZIO Schema:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},"object JsonCodec {\n  def jsonCodec[A](schema: Schema[A]): zio.json.JsonCodec[A] = ???\n}\n")),(0,a.kt)("p",null,"Let's try an example to see how it works:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nimport zio.json._\nimport zio.schema.{DeriveSchema, Schema}\n\ncase class Person(name: String, age: Int)\n\nobject Person {\n  implicit val schema: Schema[Person] =\n    DeriveSchema.gen\n  implicit val jsonCodec: zio.json.JsonCodec[Person] =\n    zio.schema.codec.JsonCodec.jsonCodec(schema)\n}\n\nobject Main extends ZIOAppDefault {\n  def run = for {\n    _ <- ZIO.debug("JSON Codec Example:")\n    person: Person  = Person("John", 42)\n    encoded: String = person.toJson\n    _       <- ZIO.debug(s"person object encoded to JSON string: $encoded")\n    decoded <- ZIO.fromEither(Person.jsonCodec.decodeJson(encoded))\n    _       <- ZIO.debug(s"JSON object decoded to Person class: $decoded")\n  } yield ()\n}\n')),(0,a.kt)("h2",{id:"binarycodec"},"BinaryCodec"),(0,a.kt)("p",null,"We can also derive a binary codec from a ZIO Schema using the ",(0,a.kt)("inlineCode",{parentName:"p"},"schemaBasedBinaryCodec"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},"object JsonCodec {\n  implicit def schemaBasedBinaryCodec[A](implicit schema: Schema[A]): BinaryCodec[A] = ???\n}\n")),(0,a.kt)("p",null,"Let's try an example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},'import zio._\nimport zio.schema.codec.BinaryCodec\nimport zio.schema.{DeriveSchema, Schema}\n\ncase class Person(name: String, age: Int)\n\nobject Person {\n  implicit val schema: Schema[Person] =\n    DeriveSchema.gen\n  implicit val jsonBinaryCodec: BinaryCodec[Person] =\n    zio.schema.codec.JsonCodec.schemaBasedBinaryCodec(schema)\n}\n\nobject Main extends ZIOAppDefault {\n  def run = for {\n    _ <- ZIO.debug("JSON Codec Example:")\n    person: Person = Person("John", 42)\n    encoded: Chunk[Byte] = Person.jsonBinaryCodec.encode(person)\n    _ <- ZIO.debug(s"person object encoded to Binary JSON: ${toHex(encoded)}")\n    decoded <- ZIO.fromEither(Person.jsonBinaryCodec.decode(encoded))\n    _ <- ZIO.debug(s"JSON object decoded to Person class: $decoded")\n  } yield ()\n\n  def toHex(bytes: Chunk[Byte]): String =\n    bytes.map("%02x".format(_)).mkString(" ")\n}\n')),(0,a.kt)("p",null,"The output of the above program is:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scala"},"JSON Codec Example:\nperson object encoded to JSON string: 7b 22 6e 61 6d 65 22 3a 22 4a 6f 68 6e 22 2c 22 61 67 65 22 3a 34 32 7d\nJSON object decoded to Person class: Person(John,42)\n")),(0,a.kt)("p",null,"By utilizing JSON codecs derived from ZIO Schema, developers can easily serialize and deserialize data in JSON format without writing boilerplate code. This enhances productivity and simplifies data handling in Scala applications."))}m.isMDXComponent=!0}}]);